// <auto-generated/>
#nullable enable

using System;
using Microsoft.Extensions.DependencyInjection;
using Zylance.Core.Controllers.Services;

namespace {{ namespace }};

/// <summary>
///     Assembly-wide controller registration extensions.
///     This class is generated at compile-time and discovers all controllers with handler attributes.
/// </summary>
public static partial class ControllerRegistration
{
    /// <summary>
    ///     Registers all controllers found in this assembly.
    ///     Discovered {{ controller_count }} controller(s) with handler methods.
    /// </summary>
    /// <param name="router">The RouterService instance</param>
    /// <param name="serviceProvider">The service provider to resolve controller instances from</param>
    /// <returns>The RouterService for method chaining</returns>
    public static RouterService RegisterAllControllers(
        this RouterService router,
        IServiceProvider serviceProvider)
    {
        {{#each controllers}}
            // Register {{ class_name }} ({{ handler_count }} handler(s))
            {
                var controller = serviceProvider.GetRequiredService<{{ full_type_name }}>();
                router.Register{{ class_name }}(controller);
            }
        {{/each}}

        return router;
    }

    /// <summary>
    ///     Registers all controllers found in this assembly using provided instances.
    ///     Discovered {{ controller_count }} controller(s) with handler methods.
    /// </summary>
    /// <param name="router">The RouterService instance</param>
    {{#each controllers}}
        /// <param name="{{ camel_case_name }}">Instance of {{ class_name }}</param>
    {{/each}}
    /// <returns>The RouterService for method chaining</returns>
    public static RouterService RegisterAllControllers(
        this RouterService router,
        {{#each controllers}}
            {{ full_type_name }} {{ camel_case_name }}{{#unless @last}},{{/unless}}
        {{/each}}
    )
    {
        {{#each controllers}}
            router.Register{{ class_name }}({{ camel_case_name }});
        {{/each}}
        return router;
    }
}
